<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>배치 성공이 아니라 KPI 신뢰를 보장하는 Airflow 파이프라인</title>
  <meta name="description" content="RetailRocket clickstream으로 Funnel·Cohort·CRM 타겟을 산출하고, 지표 정의·세션 기준·QA를 고정해 KPI 신뢰를 확보한 데이터 파이프라인 포트폴리오." />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="wrap topbar-inner">
      <a class="brand" href="#top">DA-AIRFLOW_RETAILROCKET</a>
      <nav class="top-links">
        <a href="https://github.com/GeonYul2/DA-AIRFLOW_RETAILROCKET" target="_blank" rel="noreferrer">GitHub Repo</a>
        <a href="https://github.com/GeonYul2/DA-AIRFLOW_RETAILROCKET/blob/main/README.md" target="_blank" rel="noreferrer">README</a>
      </nav>
    </div>
  </header>

  <main id="top" class="wrap article">
    <section class="hero">
      <span class="chip">대표 재현: target_date=2015-06-16</span>
      <h1>배치 성공이 아니라 KPI 신뢰를 보장하는 Airflow 파이프라인</h1>
      <p>
        RetailRocket clickstream으로 <strong>퍼널·코호트·CRM 타겟</strong>을 산출합니다.<br />
        핵심은 산출 자체보다, <strong>지표 정의·세션 기준·QA</strong>를 고정해 같은 데이터에서 같은 KPI가 나오도록 만든 점입니다.
      </p>
    </section>

    <section>
      <h2>왜 이걸 만들었나</h2>
      <p>
        CVR 급락 알림이 오면 보통 캠페인과 예산부터 조정합니다.
        그런데 세션 기준이 바뀌거나 전환 정의가 달라지거나 <code>transaction_id</code> 누락이 생기면,
        같은 로그에서도 결론이 달라집니다.
      </p>
      <p>
        그래서 이 파이프라인은 <strong>배치 성공</strong>보다 먼저 <strong>KPI 신뢰</strong>를 확인하도록 설계했습니다.
      </p>
    </section>

    <section>
      <h2>내가 만든 것</h2>
      <div class="cards">
        <article class="card">
          <h3>분석 산출</h3>
          <p>Funnel / Cohort / CRM Targets</p>
        </article>
        <article class="card">
          <h3>QA 게이트 5종</h3>
          <p>domain · integrity · null · rowcount · KPI range(0~1)</p>
        </article>
        <article class="card">
          <h3>운영 전달물</h3>
          <p>CSV 3종 + summary TXT 1종</p>
        </article>
        <article class="card">
          <h3>재현 실행</h3>
          <p><code>target_date</code>로 과거 날짜 backfill</p>
        </article>
      </div>
    </section>

    <section>
      <h2>증거</h2>
      <div class="proof-grid">
        <figure class="proof-card">
          <img src="./assets/airflow_run_success.png" alt="Airflow DAG graph, all tasks success" loading="lazy" />
          <figcaption>Run evidence: manual backfill run, all tasks success</figcaption>
        </figure>
        <figure class="proof-card">
          <img src="./assets/outputs_2015-06-16.png" alt="Generated outputs for 2015-06-16" loading="lazy" />
          <figcaption>Output evidence: CSV 3종 + summary TXT 생성(2015-06-16)</figcaption>
        </figure>
      </div>
    </section>

    <section>
      <h2>설계 한 장 요약</h2>
      <figure class="arch">
        <img src="./assets/pipeline_architecture.svg" alt="Pipeline architecture" loading="lazy" />
      </figure>
      <ul class="summary-list">
        <li><strong>RAW</strong>: 원본 로그 보존으로 추적 가능성 확보</li>
        <li><strong>STAGING</strong>: 타입/포맷 표준화로 전처리 편차 축소</li>
        <li><strong>DATA MART</strong>: dim/fact + 세션화로 분석 단위 통일</li>
        <li><strong>KPI</strong>: 퍼널·코호트·CRM 계산 분리로 정의 단일화</li>
        <li><strong>QA</strong>: 5개 검증 통과 여부를 실행 조건으로 적용</li>
        <li><strong>EXPORT</strong>: 운영 전달용 고정 포맷(CSV/TXT) 생성</li>
      </ul>
    </section>

    <section>
      <h2>결과</h2>
      <ul class="summary-list">
        <li>실행 1회마다 동일 포맷 산출물 4개를 자동 생성</li>
        <li>샘플 실행(2015-06-16): visitors 4,379 / sessions 4,540 / purchases 67</li>
        <li>CRM 타겟 312명(80/115/117), QA 5종 PASS 후에만 export</li>
      </ul>
    </section>

    <section>
      <h2>활용 관점</h2>
      <ul class="summary-list">
        <li><strong>BA/그로스</strong>: KPI 급락 시 캠페인 조정보다 먼저 정의/세션/누락을 점검</li>
        <li><strong>DQA/운영</strong>: 배치 성공과 KPI 신뢰를 분리해 품질 기준으로 운영</li>
      </ul>
      <p class="next">Next: Slack 알림, 품질 대시보드, dbt/GE 테스트 연계로 확장 가능</p>
    </section>
  </main>

  <footer class="footer">
    <div class="wrap footer-inner">
      <div>© <span id="y"></span> GeonYul</div>
      <div class="footer-links">
        <a href="https://geonyul2.github.io/DA-AIRFLOW_RETAILROCKET/" target="_blank" rel="noreferrer">Project Page</a>
        <a href="#top">맨 위로</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
